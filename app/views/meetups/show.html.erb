<div class="row">
	<div class="col s7">
		<h5>Meetup Details</h5>
		<p>Date: <%= @meetup.date.strftime("%A, %B %d") %></p>
		<p>Location: <%= link_to @meetup.location.name, location_path(@meetup.location) %></p>
		<p>Average Time Added to Commute: <%= @meetup.average_additional_commute_time.round(1)%> minutes.</p>
		<p>Category: <%= @meetup.location.location_type.category%></p>
		<%= image_tag("#{@meetup.location.file}") %>


		<% if @locations %>
			<h5>Please select a location:</h5>
			<%= form_for [@meetup.group, @meetup] do |f| %>
				<% @locations.each do |location| %>
					<p><label>
						<%= f.radio_button :location_id, "[#{location[0].id},#{location[1]}]", class: 'with-gap'	%>
						<span><%= "#{location[0].name} - #{location[1].round} minutes " %></span>
					</label></p>
				<% end %>
				<%= f.submit "Meetup!"%>
			<% end %>

		<% end %>
	</div>
	
	<div class="col s1"></div>
	<div class="col s4">
		<h5>Who's coming?</h5>
		<p><b><%= link_to @meetup.group.name, group_path(@meetup.group) %></b></p>
		<p>
			<% @meetup.group.members.each do |member| %>
				<%= member.name %><br />
			<% end %>
		</p>
		<br />
		<p>
			<%= button_to 'Cancel Meetup', group_meetup_path(@meetup.group, @meetup), method: :delete, class: 'left waves-effect waves-light btn janky-css' %>
		</p>
	</div>
</div>
<script>
	$(document).on('turbolinks:load', function(){
		var pattern = new RegExp("\/groups\/.+\/meetups")
		if (pattern.test(window.location.pathname)) {
			// Correct the URL when loading this view via 'render' rather
			// 		than a traditional GET request.			
			const state = {
				group_slug: '<%= @meetup.group.slug %>',
				meetup_slug: '<%= @meetup.slug %>'
			}
			const title = 'Friend Hour!'
			const url = '/groups/'+state.group_slug+'/meetups/'+state.meetup_slug
			history.pushState(state, title, url);
		}
	});
</script>
